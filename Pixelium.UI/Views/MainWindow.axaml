<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        x:Class="Pixelium.UI.Views.MainWindow"
        Title="Pixelium - Image Editor"
        Width="1200" Height="800">
  
  <Grid>
    <Grid.RowDefinitions>
      <RowDefinition Height="Auto"/>
      <RowDefinition Height="*"/>
      <RowDefinition Height="Auto"/> <!-- Ãšj sor a status bar-nek -->
    </Grid.RowDefinitions>
    
    <!-- Menu Bar -->
    <Menu Grid.Row="0">
      <MenuItem Header="File">
        <MenuItem Header="New..." Command="{Binding NewCommand}"/>
        <MenuItem Header="Open..." Command="{Binding OpenCommand}"/>
        <MenuItem Header="Save..." Command="{Binding SaveCommand}"/>
        <Separator/>
        <MenuItem Header="Exit" Command="{Binding ExitCommand}"/>
      </MenuItem>
      <MenuItem Header="Edit">
        <MenuItem Header="Undo" Command="{Binding UndoCommand}"/>
        <MenuItem Header="Redo" Command="{Binding RedoCommand}"/>
      </MenuItem>
      <MenuItem Header="Filters">
        <MenuItem Header="Grayscale" Command="{Binding GrayscaleCommand}"/>
        <MenuItem Header="Invert" Command="{Binding InvertCommand}"/>
        <MenuItem Header="Flip Horizontal" Command="{Binding FlipHorizontalCommand}"/>
        <MenuItem Header="Flip Vertical" Command="{Binding FlipVerticalCommand}"/>
        <MenuItem Header="Gamma" Command="{Binding OpenGammaDialogCommand}"/>
      </MenuItem>
    </Menu>
    
    <!-- Main Content -->
    <Grid Grid.Row="1">
      <Grid.ColumnDefinitions>
        <ColumnDefinition Width="200"/>
        <ColumnDefinition Width="*"/>
      </Grid.ColumnDefinitions>
      
      <!-- Layers Panel -->
      <Border Grid.Column="0" Background="#2D2D30" BorderBrush="#3E3E42" BorderThickness="0,0,1,0">
        <StackPanel Margin="10">
          <TextBlock Text="Layers" Foreground="White" FontWeight="Bold" Margin="0,0,0,10"/>
          <ListBox Background="#2D2D30" Foreground="White">
            <ListBoxItem>Background</ListBoxItem>
          </ListBox>
        </StackPanel>
      </Border>
      
      <!-- Canvas Area -->
      <ScrollViewer Grid.Column="1" Background="#393939">
        <Canvas Name="ImageCanvas" Background="Transparent">
          <Image Name="MainImage" 
                 Source="{Binding ImageSource}"
                 Stretch="None"/>
        </Canvas>
      </ScrollViewer>
    </Grid>
    
    <Border Grid.Row="2" Background="#007ACC" Height="25">
      <TextBlock Text="{Binding StatusMessage}" 
                 Foreground="White" 
                 VerticalAlignment="Center"
                 Margin="10,0"
                 FontSize="12"/>
    </Border>

        <!-- Gamma Adjustment Dialog -->
    <Grid Background="#CC000000" 
          IsVisible="{Binding IsGammaDialogOpen}"
          ZIndex="1000">
        <Border Background="#2D2D30" 
                BorderBrush="#007ACC" 
                BorderThickness="2"
                Width="300"
                Height="200"
                VerticalAlignment="Center"
                HorizontalAlignment="Center">
            <StackPanel Margin="20" Spacing="15">
                <TextBlock Text="Gamma Adjustment" 
                          Foreground="White" 
                          FontSize="16" 
                          FontWeight="Bold"/>
                
                <TextBlock Text="{Binding GammaDisplayValue}" 
                          Foreground="White"/>
                
                <Slider Minimum="0.1" 
                       Maximum="3.0" 
                       Value="{Binding GammaValue}"
                       TickFrequency="0.1"
                       TickPlacement="BottomRight"
                       Foreground="White"/>
                
                <StackPanel Orientation="Horizontal" 
                           HorizontalAlignment="Right" 
                           Spacing="10">
                    <Button Content="Cancel" 
                           Command="{Binding CancelGammaCommand}"
                           Background="#555555"
                           Foreground="White"/>
                    <Button Content="Apply" 
                           Command="{Binding ApplyGammaCommand}"
                           Background="#007ACC"
                           Foreground="White"/>
                </StackPanel>
            </StackPanel>
        </Border>
    </Grid>
  </Grid>
</Window>
